databaseChangeLog:
  - changeSet:
      id: 1563514512549-1
      author: shuangyu-eb
      changes:
        - addColumn:
            columns:
              - column:
                  name: deactivation_reason_id
                  type: INT
              - column:
                  name: deactivated_at
                  type: DATETIME
            tableName: users

  - changeSet:
      id: 1563515652766-2
      author: shuangyu-eb
      changes:
        - createTable:
            columns:
              - column:
                  name: id
                  type: BIGINT
                  autoIncrement: true
                  constraints:
                    primaryKey: true
              - column:
                  name: name
                  type: VARCHAR(255)
              - column:
                  name: created_at
                  type: DATETIME
              - column:
                  name: updated_at
                  type: DATETIME
              - column:
                  name: deleted_at
                  type: DATETIME
            tableName: deactivation_reasons

  - changeSet:
      id: 1563515660494-3
      author: shuangyu-eb
      runOnchange: true
      changes:
        - loadUpdateData:
            columns:
              - column:
                  name: id
                  type: NUMERIC
              - column:
                  name: name
                  type: STRING
            file: db/changelog/data/user-status-deactivation-reasons.csv
            primaryKey: id
            tableName: deactivation_reasons

  - changeSet:
      id: 1563516527365-4
      author: shuangyu-eb
      changes:
        - modifyDataType:
            columnName: deactivation_reason_id
            newDataType: BIGINT
            tableName: users

  - changeSet:
      id: 1563516547039-5
      author: shuangyu-eb
      changes:
        - addForeignKeyConstraint:
            baseColumnNames: deactivation_reason_id
            baseTableName: users
            constraintName: fk_users_deactivations_reasons
            referencedColumnNames: id
            referencedTableName: deactivation_reasons


  - changeSet:
      id: 1566463012920-1
      author: bin-eb
      changes:
        - addColumn:
            columns:
              - column:
                  name: balance
                  type: INT
            tableName: time_off_requests


  - changeSet:
      id: 1565784545670-1
      author: max-eb
      changes:
        - addColumn:
            columns:
              - column:
                  name: user_id
                  type: varchar(64)
            tableName: users

  - changeSet:
        id: 1565786558054-2
        author: max-eb
        changes:
        - dropColumn:
           columnName: password
           tableName: users

  - changeSet:
        id: 1565786558054-3
        author: max-eb
        changes:
        - dropColumn:
           columnName: subdomain_name
           tableName: companies

  - changeSet:
        id: 1565786558054-4
        author: max-eb
        changes:
        - addUniqueConstraint:
            columnNames: user_id
            constraintName: uq_ensure_unique_user_id
            tableName: users

  - changeSet:
        id: 1567563061830-1
        author: wenhao-eb
        preConditions:
          onFail: MARK_RAN
          not:
            tableExists:
              tableName: user_access_level_events
        changes:
          - createTable:
              columns:
                - column:
                    name: id
                    type: BIGINT
                    autoIncrement: true
                    constraints:
                      primaryKey: true
                - column:
                    name: user_id
                    type: BIGINT
                    constraints:
                      foreignKeyName: fk_user_access_levels_users
                      references: users(id)
                - column:
                    name: original_role
                    type: VARCHAR(255)
                - column:
                    name: created_at
                    type: DATETIME
                - column:
                    name: updated_at
                    type: DATETIME
                - column:
                    name: deleted_at
                    type: DATETIME
              tableName: user_access_level_events

  - changeSet:
      id: 1567646375921-1
      author: bin-eb
      changes:
        - modifyDataType:
            columnName: city
            newDataType: VARCHAR(100)
            tableName: user_addresses

  - changeSet:
      id: 1567646375921-2
      author: bin-eb
      changes:
        - modifyDataType:
            columnName: name
            newDataType: VARCHAR(50)
            tableName: time_off_policies

  - changeSet:
      id: 1567646375921-3
      author: bin-eb
      changes:
        - modifyDataType:
            columnName: title
            newDataType: VARCHAR(100)
            tableName: jobs

  - changeSet:
      id: 1567646375921-4
      author: bin-eb
      changes:
        - modifyDataType:
            columnName: name
            newDataType: VARCHAR(30)
            tableName: employment_types

  - changeSet:
      id: 1567646375921-5
      author: bin-eb
      changes:
        - modifyDataType:
            columnName: name
            newDataType: VARCHAR(100)
            tableName: offices

  - changeSet:
      id: 1567646375921-6
      author: bin-eb
      changes:
        - modifyDataType:
            columnName: first_name
            newDataType: VARCHAR(100)
            tableName: user_personal_information

  - changeSet:
      id: 1567646375921-7
      author: bin-eb
      changes:
        - modifyDataType:
            columnName: middle_name
            newDataType: VARCHAR(100)
            tableName: user_personal_information

  - changeSet:
      id: 1567646375921-8
      author: bin-eb
      changes:
        - modifyDataType:
            columnName: last_name
            newDataType: VARCHAR(100)
            tableName: user_personal_information

  - changeSet:
      id: 1567646375921-9
      author: bin-eb
      changes:
        - modifyDataType:
            columnName: preferred_name
            newDataType: VARCHAR(100)
            tableName: user_personal_information

  - changeSet:
      id: 1567646375921-10
      author: bin-eb
      changes:
        - modifyDataType:
            columnName: first_name
            newDataType: VARCHAR(100)
            tableName: user_emergency_contacts

  - changeSet:
      id: 1567646375921-11
      author: bin-eb
      changes:
        - modifyDataType:
            columnName: city
            newDataType: VARCHAR(100)
            tableName: user_emergency_contacts

  - changeSet:
      id: 1567646375921-12
      author: bin-eb
      changes:
        - modifyDataType:
            columnName: last_name
            newDataType: VARCHAR(100)
            tableName: user_emergency_contacts

  - changeSet:
      id: 1567646375921-13
      author: bin-eb
      changes:
        - modifyDataType:
            columnName: postal_code
            newDataType: VARCHAR(30)
            tableName: user_emergency_contacts

  - changeSet:
      id: 1567646375921-14
      author: bin-eb
      changes:
        - modifyDataType:
            columnName: relationship
            newDataType: VARCHAR(30)
            tableName: user_emergency_contacts

  - changeSet:
      id: 1567646375921-15
      author: bin-eb
      changes:
        - modifyDataType:
            columnName: phone
            newDataType: VARCHAR(50)
            tableName: user_emergency_contacts

  - changeSet:
      id: 1567662525081-1
      author: wenhao-eb
      preConditions:
        onFail: MARK_RAN
        not:
          columnExists:
            columnName: federal
      changes:
        - addColumn:
            columns:
              - column:
                  name: federal
                  type: BOOLEAN
            tableName: paid_holidays

  - changeSet:
      id: 1567662525081-2
      author: wenhao-eb
      runOnchange: true
      changes:
        - loadUpdateData:
            columns:
              - column:
                  name: id
                  type: NUMERIC
              - column:
                  name: name
                  type: STRING
              - column:
                  name: name_show
                  type: STRING
              - column:
                  name: federal
                  type: BOOLEAN
            file: db/changelog/data/paid-holidays.csv
            primaryKey: id
            tableName: paid_holidays

  - changeSet:
      id: 1568257721736-1
      author: max-eb
      changes:
        - dropTable:
            tableName: permissions

  - changeSet:
      id: 1568623658913-1
      author: haibo-eb
      changes:
        - dropColumn:
            columnName: employee_number
            tableName: users

  - changeSet:
      id: 1568257721736-2
      author: max-eb
      changes:
      - dropForeignKeyConstraint:
          baseTableName: users
          constraintName: fk_users_user_roles

  - changeSet:
      id: 1568257721736-3
      author: max-eb
      changes:
        - dropTable:
            tableName: permission_types_user_roles

  - changeSet:
      id: 1568257721736-4
      author: max-eb
      changes:
        - dropTable:
            tableName: permission_types

  - changeSet:
      id: 1568257721736-5
      author: max-eb
      changes:
      - dropColumn:
          columnName: user_role_id
          tableName: users

  - changeSet:
      id: 1568257721736-6
      author: max-eb
      changes:
        - dropTable:
            tableName: user_roles

  - changeSet:
      id: 1568859094014-6
      author: shuangyu-eb
      changes:
        - addColumn:
            columns:
              - column:
                  name: change_work_email
                  type: varchar(255)
            tableName: users

  - changeSet:
      id: 1568859123573-7
      author: shuangyu-eb
      changes:
        - addColumn:
            columns:
              - column:
                  name: change_work_email_token
                  type: varchar(255)
            tableName: users


  - changeSet:
      id: 1568859230088-8
      author: shuangyu-eb
      changes:
        - addColumn:
            columns:
              - column:
                  name: verify_change_work_email_at
                  type: datetime
            tableName: users

  - changeSet:
      id: 1569287995020-1
      author: haibo-eb
      changes:
        - addColumn:
            columns:
              - column:
                  name: creator_id
                  type: bigint
            tableName: paid_holidays

  - changeSet:
      id: 1569287995020-2
      author: haibo-eb
      changes:
        - addForeignKeyConstraint:
            baseColumnNames: creator_id
            baseTableName: paid_holidays
            constraintName: fk_paid_holidays_users
            referencedColumnNames: id
            referencedTableName: users

  - changeSet:
      id: 1569724784254-1
      author: wenhao-eb
      preConditions:
        onFail: MARK_RAN
        not:
          columnExists:
            columnName: users
      changes:
        - addColumn:
            columns:
              - column:
                  name: deactivated
                  type: BOOLEAN
            tableName: users
